---
title: "浅析URL"
date: 2019-11-11T13:18:15+08:00
draft: false
---
 
# IP ——Internet Protocol
在说URL之前，先了解一下什么是IP。  

**IP是互联网协议（网络协议），他的作用是：**  
1. 约定如何定位一台设备（手机、电脑、网络摄像头等..）  
2. 约定如何封装数据报文，用以与其他设备交流。  
当我们要发文件、图片给互联网上的一台设备，我们就要知道这台设备的IP地址。  

**IP分为内网IP和外网IP。**  

内网IP由我们的路由器创建，我们的手机、电脑等设备连接到路由器，路由器会给我们的设备分配不同的内网IP。（内网IP的一般格式是192.168.xxx.xxx，一般路由器会给自己分配一个好记的内网IP，比如192.168.1.1）

**有了内网IP。我们的设备之间就可以互相通信了，但要和外界进行交流，我们还需要一个外网IP。**  

外网IP是互联网服务提供商LSP（电信、移动等）的路由器给我们的路由器分配的一个IP。LSP可以理解是为一家管理一些特殊路由器的公司。  
外网IP代表了我们在互联网中的地址，但它并固定，如果我们重启路由器，那么可能我们会被重新分配一个外网IP。

比方说当我们要登陆QQ邮箱时：  
我们的登录信息先是经过了我们自家的路由器，然后经过调制解调器，然后到达LSP，LSP可能会连接到其他LSP路由器，我们的信息会到达QQ邮箱所使用的LSP路由器，最终再次通过调制解调器和路由器到达QQ邮箱的服务器。

>什么是调制解调器？  
>我们建立网络是为了我们自己的目的。所以不同的人会建立不同的网络：你的朋友，你的邻居，每个人都可以拥有自己的计算机网络。在你的房子和世界其它地方之间架设电缆将这些不同的网络连接起来是不可能的，那么你该如何处理这件事呢？其实已经有电缆连接到你的房子了，比如，电线和电话。电话基础设施已经可以把你家连接到世界的任何角落，所以它就是我们需要的线。为了连接电话这种网络我们需要一种基础设备叫做调制解调器（modem），调制解调器可以把网络信息变成电话设施可以处理的信息，反之亦然。

资料来源：[MDN:互联网是如何工作的？](https://developer.mozilla.org/zh-CN/docs/learn/How_the_Internet_works)

**如何查看IP？**  
通过ipconfig命令/通过ip138.com查询/ping命令（下面说）

# 端口号
有了IP，我们现在可以定位到互联网上的服务器。  

但是还不够，我们还需要端口号。  
因为一台设备可以提供很多服务，每个服务都对应一个号码，这个号码就是端口号。

* 要提供HTTP服务最好使用80端口；  
* 要提供HTTPS服务最好使用443端口；  
* 要提供FTP服务最好使用21端口
* **一台机器可以有65535个端口**

**怎么知道什么时候该用什么端口？**  
维基百科搜索"TCP 端口"。[快捷入口](https://zh.wikipedia.org/zh-tw/TCP/UDP%E7%AB%AF%E5%8F%A3%E5%88%97%E8%A1%A8#0%E5%88%B01023%E5%8F%B7%E7%AB%AF%E5%8F%A3)  
 
**注意端口的使用规则：**  
1. 0-1023号端口是留给系统使用的。  
2. 只有拥有管理员权限才能使用这1024个端口。  
3. 其他端口可以给普通用户使用。（比如http-server用的8080端口）  
4. 一个端口被占用了，就只能用别的端口。  

# DNS ——Domain Name System

通过IP地址，我们就可以访问QQ邮箱、淘宝、京东，然后就使用里面的服务。

但是没那么简单。  
因为IP地址是一串数字，它并不是那么容易记忆，**于是人类发明了域名，用以直观的代表这个IP地址。**  

有了域名，我们现在就可以通过baidu.com访问百度主页，通过taobao.com访问淘宝主页，通过mail.qq.com访问qq邮箱。  

我们人类知道了域名所对应的IP地址，**那么计算机是怎么知道的呢？**  
**答案是通过DNS。**

**DNS是域名系统，它类似于一本电话册，里面记录了每一个域名所对应的IP地址**，每当我们访问一个域名，浏览器会先到DNS服务器询问这个域名对应的IP地址，然后再跳转到这个IP地址。    

>DNS数据库存储在全球每个DNS服务器上，所有这些服务器都源于(refer to)几个被称为“权威名称服务器”或“顶级DNS服务器”。

# 域名
我们知道了域名就是IP地址的别称，它们为互联网上任何可用的网页服务器提供了人类可读的地址。

**域名有分级**（以www.xiedaimala.com为例）  
.com是顶级域名；  
xiedaimala.com是二级域名（俗称一级域名）  
www.xiedaimala.com是三级域名（俗称二级域名）  

他们是父子关系。  

**"xiedaimala.com"和"www.xiedaimala.com"可以不是同一个公司，也可以是。**  
比如github.io把子域名xxx.github.io免费给用户使用。

**负载均衡与共享主机**  
1. 负载均衡，一个域名可以对应不同的IP，**防止服务器扛不住。**    
2. 共享主机，一个IP可以对应不同的域名。  

**通过nslookup命令和ping查询域名对应的IP**  
~~~
nslookup '域名'

------

ping '域名'
~~~

# 路径 查询参数 锚点
## 路径
**用于请求不同的页面。**

我们把一个网站比喻为一个文件夹，每一个文件夹里面都放着不同的文件，我们要查看文件夹中的某个文件，就需要知道这个文件在文件夹中的路径。  

同样，这里的路径就是告诉浏览器，我要查询这个域名（IP地址）中的某个页面。
## 查询参数
**用于请求同一个页面，不同的内容。**

比如我们使用百度引擎搜索，每次百度都会给我们一样的搜索结果页面，但我们要告诉浏览器我要搜索的东西是什么，就需要通过查询参数。

## 锚点
**用于定位到同一个内容中的不同位置。** 

把互联网比作这个世界上所有图书馆组成的一个网，  
域名就是定位到这个图书馆的位置，（深圳图书馆？还是广州图书馆？）    
路径就是定位到图书馆上的第几层，（比如第三层文学类，第四层计算机类等）  
查询参数就是定位到我要看哪一本书，（比如文学类——四大名著——红楼梦）   
**而锚点就是定位到这本书上的具体某一章节。**    

我们可以在图书馆的查询系统找到具体某一本书的具体位置，但是找不到这本书的具体章节内容，显然书中的具体内容不会传到这个查询系统。   
那么同样，域名、路径和查询参数可以在Network中看到，但是锚点不会显示在这里，因为锚点不会传给服务器。

**锚点在地址栏显示中文，但实际上不支持中文，它会被自动编码。**

# URL ——Uniform Resource Locator
**URL是统一资源定位符**

>URL无非就是一个给定的独特资源在Web上的地址。理论上说，每个有效的URL都指向一个独特的资源。这个资源可以是一个HTML页面，一个CSS文档，一幅图像，等等。


URL结合了上面的各个部分，它包括：  
**协议**(通常是http:// 或 https://)：表明了浏览器必须使用何种协议。   
**域名**：IP的别称，它表明正在请求哪个Web服务器。   
**端口号**：表示用于访问Web服务器上的资源的技术“门”。如果Web服务器使用HTTP协议的标准端口（HTTP为80，HTTPS为443）来授予其资源的访问权限，则通常会被忽略。否则是强制性的。  
**路径**：表示网络服务器上资源的路径。从域名后面的"/"开始，单一的"/"表示根目录。    
**查询参数**："?"后面的一连串字符就是查询参数，这些参数用"&"分隔，是用于访问同一个页面上的不同内容。    
**锚点**：用于定位到同一个内容上的不同位置，类似于书签。   

# 声明
_**版权声明：本文为周啟尧原创文章，著作权归本人和饥人谷所有，转载务必注明来源**_

_**本文参考了MDN文档内容:**_  
[MDN:什么是URL?](https://developer.mozilla.org/zh-CN/docs/Learn/Common_questions/What_is_a_URL)   

[MDN:什么是网络服务器?](https://developer.mozilla.org/zh-CN/docs/Learn/Common_questions/What_is_a_web_server)   

[MDN:互联网是怎么工作的?](https://developer.mozilla.org/zh-CN/docs/learn/How_the_Internet_works)   

[MDN:什么是域名?](https://developer.mozilla.org/zh-CN/docs/Learn/Common_questions/What_is_a_domain_name)   

[MDN:万维网是怎么工作的?](https://developer.mozilla.org/zh-CN/docs/Learn/Getting_started_with_the_web/How_the_Web_works)